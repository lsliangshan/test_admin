/*! test_admin 2015-12-08 */
"use strict";angular.module("app").controller("MainCtrl",["$scope","$translate","$localStorage","$window","$compile","FileUploader","$alert","cfpLoadingBar",function(a,b,c,d,e,f,g,h){function i(a){var b=a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName;return a instanceof jQuery?1:b?2:0}function j(a){var b=a.navigator.userAgent||a.navigator.vendor||a.opera;return/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(b)}h.start(),a.lsAlert=function(a,b,c){},a.dropdown=[{text:'<i class="fa fa-fw fa-download"></i>&nbsp;Another action',href:"#anotherAction"},{text:'<i class="fa fa-fw fa-globe"></i>&nbsp;Display an alert',click:'$alert("Holy guacamole!")'},{text:'<i class="fa fa-fw fa-external-link"></i>&nbsp;External link',href:"/auth/facebook",target:"_self"},{divider:!0},{text:"Separated link",href:"#separatedLink"}],a.ajaxFormSubmit=function(a,b,c,d){if(b&&"string"==typeof b){var e,f=i(a);e=1==f?a:2==f?$(a):$(a),e.ajaxSubmit({url:b,dataType:"json",method:"post",data:c||{},beforeSubmit:function(){},success:function(a){d&&d(a)}})}},a.uploaderInfo={};var k=a.uploader=new f({url:"/Index/upload",autoUpload:!0,removeAfterUpload:!0,queueLimit:1,filter:"imageFilter"});k.filters.push({name:"imageFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(c)}}),k.onAfterAddingFile=function(b){a.uploader.queue[0].progress=0},k.onSuccessItem=function(a,b,c,d){},k.onCompleteItem=function(b,c,d,f){setTimeout(function(){k.queue=[],c.errno>0?alert(c.errmsg):($(".progress").eq(0).html(e($(".progress").eq(0).html())(a)),$(".progress").eq(0).find(".progress-bar").eq(0).css({width:"0%"}),$.post("/Public/updateHeadIcon",{headicon:c.data.fileurl},function(a){}))},2e3),a.uploaderInfo=c.data};var l=!!navigator.userAgent.match(/MSIE/i)||!!navigator.userAgent.match(/Trident.*rv:11\./);l&&angular.element(d.document.body).addClass("ie"),j(d)&&angular.element(d.document.body).addClass("smart"),a.app={name:_appName,version:"3.1",color:{primary:"#155abb",info:"#2772ee",success:"#4bb622",warning:"#f88311",danger:"#e11144",inverse:"#a66bee",light:"#f1f2f3",dark:"#202a3a"},settings:{headerColor:"bg-primary",headerFixed:!0,headerShadow:!0,asideColor:"bg-dark lt",asideTop:!1}},a.author={name:_username},a.options={headerColor:["bg-primary lt","bg-primary ","bg-primary dk","bg-info lt","bg-info","bg-info dk","bg-success lt","bg-success ","bg-success dk","bg-inverse lt","bg-inverse ","bg-inverse dk","bg-dark lt","bg-dark","bg-dark dk ","bg-black ","bg-black dk","bg-white box-shadow-md"],asideColor:["bg-primary dk","bg-info dk","bg-success dk","bg-dark lt","bg-dark","bg-dark dk","bg-black lt","bg-black","bg-black dk","bg-white","bg-light","bg-light dk"]},a.setHeaderColor=function(b){a.app.settings.headerColor=b},a.setAsideColor=function(b){a.app.settings.asideColor=b},angular.isDefined(c.appSettings)?a.app.settings=c.appSettings:c.appSettings=a.app.settings,a.$watch("app.settings",function(){c.appSettings=a.app.settings},!0),a.langs={en:"English",zh_CN:"中文"},a.selectLang=a.langs[b.proposedLanguage()]||"English",a.setLang=function(c){a.selectLang=a.langs[c],b.use(c)},$.pjax&&$.pjax.defaults&&($.pjax.defaults.type="get"),$(document).pjax("a[data-pjax]","#p-container"),$(document).on("pjax:start",function(){}),$(document).on("pjax:complete",function(){$("#p-container").html(e($("#p-container").html())(a)),setTimeout(function(){var a=document.querySelector("#p-container .container");a.style.opacity=1,a.style.webkitTransform="translate3d(0, 0, 0)",a.style.mozTransform="translate3d(0, 0, 0)",a.style.oTransform="translate3d(0, 0, 0)",a.style.transform="translate3d(0, 0, 0)"},20)}),a.modifyProfile=function(){a.ajaxFormSubmit("#profile-form","/Public/modifyProfile",{},function(b){a.lsAlert(b.errmsg),b.data.referer&&(location.href=b.data.referer)})}}]);